<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module BingAdsApi::Helpers::FilterHelper - RDoc Documentation</title>

<link href="../../fonts.css" rel="stylesheet">
<link href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/navigation.js"></script>
<script src="../../js/search_index.js"></script>
<script src="../../js/search.js"></script>
<script src="../../js/searcher.js"></script>
<script src="../../js/darkfish.js"></script>


<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="../SOAPHasheable.html">BingAdsApi::SOAPHasheable</a>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-filter_to_hash">#filter_to_hash</a>
    
    <li ><a href="#method-i-solve_filter_value">#solve_filter_value</a>
    
    <li ><a href="#method-i-valid_filter">#valid_filter</a>
    
    <li ><a href="#method-i-valid_filter_value">#valid_filter_value</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-BingAdsApi::Helpers::FilterHelper">
  <h1 id="module-BingAdsApi::Helpers::FilterHelper" class="module">
    module BingAdsApi::Helpers::FilterHelper
  </h1>

  <section class="description">
    
<p>Public : Utility module for filter attribute in <code>ReportRequest</code>
derived classes</p>
<dl class="rdoc-list note-list"><dt>Author
<dd>
<p>jlopezn@neonline.cl</p>
</dd></dl>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="FILTERS_CRITERIA">FILTERS_CRITERIA
        
        <dd><p>Valid filters values for each known criteria</p>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-filter_to_hash" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">filter_to_hash</span><span
            class="method-args">(valid_filters, keys_case=:undescore)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Public : Returns the filter attribute as a Hash to SOAP requests</p>
<dl class="rdoc-list note-list"><dt>Author
<dd>
<p>jlopezn@neonline.cl</p>
</dd></dl>

<p>filter - Hash with the filter values</p>
<dl class="rdoc-list note-list"><dt>Returns
<dd>
<p>Hash</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="filter_to_hash-source">
            <pre><span class="ruby-comment"># File lib/bing-ads-api/data/reporting/helpers/filter_helper.rb, line 70</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">filter_to_hash</span>(<span class="ruby-identifier">valid_filters</span>, <span class="ruby-identifier">keys_case</span>=<span class="ruby-value">:undescore</span>)
        <span class="ruby-identifier">hashed_filter</span> = {}
        <span class="ruby-identifier">filter</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">hashed_filter</span>[<span class="ruby-identifier">get_attribute_key</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">keys_case</span>)] = <span class="ruby-identifier">solve_filter_value</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">hashed_filter</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-solve_filter_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">solve_filter_value</span><span
            class="method-args">(filter_criteria, filter_value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <dl class="rdoc-list note-list"><dt>Internal
<dd>
<p>Solves the Bing value for the given filter attribute</p>
</dd><dt>Author
<dd>
<p>jlopezn@neonline.cl</p>
</dd></dl>

<h3 id="method-i-solve_filter_value-label-Parameters">Parameters<span><a href="#method-i-solve_filter_value-label-Parameters">&para;</a> <a href="#documentation">&uarr;</a></span></h3>
<ul><li>
<p><code>filter_criteria</code> - String or symbol with the filter attribute
to be solved</p>
</li></ul>

<h3 id="method-i-solve_filter_value-label-Examples+">Examples <span><a href="#method-i-solve_filter_value-label-Examples+">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">solve_filter_value</span>(:<span class="ruby-identifier">ad_distribution</span>, :<span class="ruby-identifier">search</span>) 
<span class="ruby-comment"># =&gt; &quot;Search&quot; </span>

<span class="ruby-identifier">solve_filter_value</span>(:<span class="ruby-identifier">ad_distribution</span>, :<span class="ruby-identifier">other</span>) 
<span class="ruby-comment"># =&gt; Exception &quot;Invalid filter name &#39;other&#39; for &#39;ad_distribution&#39; criteria&quot;</span>

<span class="ruby-identifier">solve_filter_value</span>(:<span class="ruby-identifier">ad_distribution</span>, <span class="ruby-string">&quot;Search&quot;</span>) 
<span class="ruby-comment"># =&gt; &quot;Search&quot; </span>

<span class="ruby-identifier">solve_filter_value</span>(:<span class="ruby-identifier">ad_distribution</span>, <span class="ruby-string">&quot;Other&quot;</span>) 
<span class="ruby-comment"># =&gt; Exception &quot;Invalid filter value &#39;Other&#39; for &#39;ad_distribution&#39; criteria&quot;</span>
</pre>
<dl class="rdoc-list note-list"><dt>Returns
<dd>
<p>String with the Bing value for the filter criteria.</p>
</dd><dt>Raises
<dd>
<p>Exception if the filter&#39;s criteria or value are unknown</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="solve_filter_value-source">
            <pre><span class="ruby-comment"># File lib/bing-ads-api/data/reporting/helpers/filter_helper.rb, line 102</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">solve_filter_value</span>(<span class="ruby-identifier">filter_criteria</span>, <span class="ruby-identifier">filter_value</span>)
        
        <span class="ruby-identifier">filter_criteria_values</span> = <span class="ruby-constant">FILTERS_CRITERIA</span>[<span class="ruby-identifier">filter_criteria</span>.<span class="ruby-identifier">to_s</span>]
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">filter_value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
                <span class="ruby-keyword">if</span> <span class="ruby-identifier">filter_criteria_values</span>.<span class="ruby-identifier">value?</span>(<span class="ruby-identifier">filter_value</span>)
                        <span class="ruby-keyword">return</span> <span class="ruby-identifier">filter_value</span>
                <span class="ruby-keyword">else</span>
                        <span class="ruby-identifier">raise</span> <span class="ruby-constant">Exception</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid filter value &#39;#{filter_value}&#39; for &#39;#{filter_criteria}&#39; criteria&quot;</span>)
                <span class="ruby-keyword">end</span> 
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">filter_value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)
                <span class="ruby-keyword">if</span> <span class="ruby-identifier">filter_criteria_values</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">filter_value</span>.<span class="ruby-identifier">to_s</span>)
                        <span class="ruby-keyword">return</span> <span class="ruby-identifier">filter_criteria_values</span>[<span class="ruby-identifier">filter_value</span>.<span class="ruby-identifier">to_s</span>]
                <span class="ruby-keyword">else</span>
                        <span class="ruby-identifier">raise</span> <span class="ruby-constant">Exception</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid filter name &#39;#{filter_value}&#39; for &#39;#{filter_criteria}&#39; criteria&quot;</span>)
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-valid_filter" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">valid_filter</span><span
            class="method-args">(valid_filters, filter)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Internal : Validates the filter attribute at the ReporRequest
initialization At the first invalid filter criteria or value detected this
method raises Exception. If all filter criteria and values are ok, this
method returns true  Valid filter criteria are validated against <a
href="FilterHelper.html#FILTERS_CRITERIA">FILTERS_CRITERIA</a> constant
Valid filter values are validated against FILTERS constant</p>
<dl class="rdoc-list note-list"><dt>Author
<dd>
<p>jlopezn@neonline.cl</p>
</dd></dl>

<h3 id="method-i-valid_filter-label-Parameters">Parameters<span><a href="#method-i-valid_filter-label-Parameters">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>valid_filters - Hash with the set of valid filter values filter - Hash with
the filter criteria and values</p>
<dl class="rdoc-list note-list"><dt>Returns
<dd>
<p>true if filter is valid</p>
</dd><dt>Raises
<dd>
<p>Exception at the first invalid filter criteria o value</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="valid_filter-source">
            <pre><span class="ruby-comment"># File lib/bing-ads-api/data/reporting/helpers/filter_helper.rb, line 34</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">valid_filter</span>(<span class="ruby-identifier">valid_filters</span>, <span class="ruby-identifier">filter</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">filter</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">filter</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
                <span class="ruby-identifier">filter</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">filter_key</span><span class="ruby-operator">|</span>
                        <span class="ruby-comment"># validates if filter criteria is recognized</span>
                        <span class="ruby-identifier">raise</span> <span class="ruby-constant">Exception</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid filter criteria &#39;#{filter_key.to_s}&#39;&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">valid_filters</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">filter_key</span>.<span class="ruby-identifier">to_s</span>)
                        <span class="ruby-comment"># validates the filter criteria value</span>
                        <span class="ruby-identifier">valid_filter_value</span>(<span class="ruby-identifier">filter_key</span>, <span class="ruby-identifier">filter</span>[<span class="ruby-identifier">filter_key</span>])
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-valid_filter_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">valid_filter_value</span><span
            class="method-args">(key, value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Internal : Validates a specific filter criteria and his value</p>
<dl class="rdoc-list note-list"><dt>Author
<dd>
<p>jlopezn@neonline.cl</p>
</dd></dl>

<p>key - filter criteria to evaluate value - filter criteria to be evaluate</p>
<dl class="rdoc-list note-list"><dt>Returns
<dd>
<p>true if validation runs ok. Raise exception otherwise</p>
</dd><dt>Raises
<dd>
<p>Exception if filter value provided is not valid</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="valid_filter_value-source">
            <pre><span class="ruby-comment"># File lib/bing-ads-api/data/reporting/helpers/filter_helper.rb, line 57</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">valid_filter_value</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">solve_filter_value</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

